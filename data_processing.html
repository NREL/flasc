
<!DOCTYPE html>


<html lang="python" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Raw data processing &#8212; FLASC</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=30a733bc"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-3PMGTE1H70"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-3PMGTE1H70');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-3PMGTE1H70');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'data_processing';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="python"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/curve.png" class="logo__image only-light" alt="FLASC - Home"/>
    <script>document.write(`<img src="_static/curve.png" class="logo__image only-dark" alt="FLASC - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    FLASC documentation
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>




<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">User Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="energy_ratio.html">Energy ratio analysis</a></li>

<li class="toctree-l1"><a class="reference internal" href="total_uplift.html">Total uplift</a></li>
<li class="toctree-l1"><a class="reference internal" href="licensing.html">Licensing</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="api.html">API Documentation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/flasc.analysis.html">flasc.analysis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio.html">flasc.analysis.energy_ratio</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio.compute_energy_ratio.html">flasc.analysis.energy_ratio.compute_energy_ratio</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio_heterogeneity_mapper.html">flasc.analysis.energy_ratio_heterogeneity_mapper</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio_heterogeneity_mapper.heterogeneity_mapper.html">flasc.analysis.energy_ratio_heterogeneity_mapper.heterogeneity_mapper</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio_input.html">flasc.analysis.energy_ratio_input</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio_input.generate_block_list.html">flasc.analysis.energy_ratio_input.generate_block_list</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio_input.EnergyRatioInput.html">flasc.analysis.energy_ratio_input.EnergyRatioInput</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio_output.html">flasc.analysis.energy_ratio_output</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.analysis.energy_ratio_output.EnergyRatioOutput.html">flasc.analysis.energy_ratio_output.EnergyRatioOutput</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.analysis.total_uplift.html">flasc.analysis.total_uplift</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.analysis.total_uplift.compute_total_uplift.html">flasc.analysis.total_uplift.compute_total_uplift</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/flasc.model_fitting.html">flasc.model_fitting</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_sensitivity_analysis.html">flasc.model_fitting.floris_sensitivity_analysis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_sensitivity_analysis.floris_sobol_analysis.html">flasc.model_fitting.floris_sensitivity_analysis.floris_sobol_analysis</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_tuning.html">flasc.model_fitting.floris_tuning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_tuning.evaluate_overall_wake_loss.html">flasc.model_fitting.floris_tuning.evaluate_overall_wake_loss</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_tuning.select_best_wake_model_parameter.html">flasc.model_fitting.floris_tuning.select_best_wake_model_parameter</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_tuning.select_best_wd_std.html">flasc.model_fitting.floris_tuning.select_best_wd_std</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_tuning.sweep_deflection_parameter_for_total_uplift.html">flasc.model_fitting.floris_tuning.sweep_deflection_parameter_for_total_uplift</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_tuning.sweep_velocity_model_parameter_for_overall_wake_losses.html">flasc.model_fitting.floris_tuning.sweep_velocity_model_parameter_for_overall_wake_losses</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.floris_tuning.sweep_wd_std_for_er.html">flasc.model_fitting.floris_tuning.sweep_wd_std_for_er</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.model_fitting.turbulence_estimator.html">flasc.model_fitting.turbulence_estimator</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.turbulence_estimator.ti_estimator.html">flasc.model_fitting.turbulence_estimator.ti_estimator</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.model_fitting.yaw_pow_fitting.html">flasc.model_fitting.yaw_pow_fitting</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.model_fitting.yaw_pow_fitting.yaw_pow_fitting.html">flasc.model_fitting.yaw_pow_fitting.yaw_pow_fitting</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/flasc.data_processing.html">flasc.data_processing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.html">flasc.data_processing.dataframe_manipulations</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.df_drop_nan_rows.html">flasc.data_processing.dataframe_manipulations.df_drop_nan_rows</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.df_find_and_fill_data_gaps_with_missing.html">flasc.data_processing.dataframe_manipulations.df_find_and_fill_data_gaps_with_missing</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.df_reduce_precision.html">flasc.data_processing.dataframe_manipulations.df_reduce_precision</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.df_sort_and_find_duplicates.html">flasc.data_processing.dataframe_manipulations.df_sort_and_find_duplicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.df_sort_and_fix_duplicates.html">flasc.data_processing.dataframe_manipulations.df_sort_and_fix_duplicates</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.filter_df_by_ti.html">flasc.data_processing.dataframe_manipulations.filter_df_by_ti</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.filter_df_by_wd.html">flasc.data_processing.dataframe_manipulations.filter_df_by_wd</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.filter_df_by_ws.html">flasc.data_processing.dataframe_manipulations.filter_df_by_ws</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.get_column_mean.html">flasc.data_processing.dataframe_manipulations.get_column_mean</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.get_num_turbines.html">flasc.data_processing.dataframe_manipulations.get_num_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.is_day_or_night.html">flasc.data_processing.dataframe_manipulations.is_day_or_night</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.make_df_wide.html">flasc.data_processing.dataframe_manipulations.make_df_wide</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.plot_sun_altitude_with_day_night_color.html">flasc.data_processing.dataframe_manipulations.plot_sun_altitude_with_day_night_color</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_pow_ref_by_n_closest_upstream_turbines.html">flasc.data_processing.dataframe_manipulations.set_pow_ref_by_n_closest_upstream_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_pow_ref_by_turbines.html">flasc.data_processing.dataframe_manipulations.set_pow_ref_by_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_pow_ref_by_upstream_turbines.html">flasc.data_processing.dataframe_manipulations.set_pow_ref_by_upstream_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_pow_ref_by_upstream_turbines_in_radius.html">flasc.data_processing.dataframe_manipulations.set_pow_ref_by_upstream_turbines_in_radius</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ti_by_all_turbines.html">flasc.data_processing.dataframe_manipulations.set_ti_by_all_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ti_by_turbines.html">flasc.data_processing.dataframe_manipulations.set_ti_by_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ti_by_upstream_turbines.html">flasc.data_processing.dataframe_manipulations.set_ti_by_upstream_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ti_by_upstream_turbines_in_radius.html">flasc.data_processing.dataframe_manipulations.set_ti_by_upstream_turbines_in_radius</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_wd_by_all_turbines.html">flasc.data_processing.dataframe_manipulations.set_wd_by_all_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_wd_by_radius_from_turbine.html">flasc.data_processing.dataframe_manipulations.set_wd_by_radius_from_turbine</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_wd_by_turbines.html">flasc.data_processing.dataframe_manipulations.set_wd_by_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ws_by_all_turbines.html">flasc.data_processing.dataframe_manipulations.set_ws_by_all_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ws_by_n_closest_upstream_turbines.html">flasc.data_processing.dataframe_manipulations.set_ws_by_n_closest_upstream_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ws_by_turbines.html">flasc.data_processing.dataframe_manipulations.set_ws_by_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ws_by_upstream_turbines.html">flasc.data_processing.dataframe_manipulations.set_ws_by_upstream_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.dataframe_manipulations.set_ws_by_upstream_turbines_in_radius.html">flasc.data_processing.dataframe_manipulations.set_ws_by_upstream_turbines_in_radius</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.data_processing.energy_ratio_wd_bias_estimation.html">flasc.data_processing.energy_ratio_wd_bias_estimation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.energy_ratio_wd_bias_estimation.bias_estimation.html">flasc.data_processing.energy_ratio_wd_bias_estimation.bias_estimation</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.data_processing.filtering.html">flasc.data_processing.filtering</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.filtering.df_get_no_faulty_measurements.html">flasc.data_processing.filtering.df_get_no_faulty_measurements</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.filtering.df_mark_turbdata_as_faulty.html">flasc.data_processing.filtering.df_mark_turbdata_as_faulty</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.filtering.filter_df_by_faulty_impacting_turbines.html">flasc.data_processing.filtering.filter_df_by_faulty_impacting_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.filtering.FlascFilter.html">flasc.data_processing.filtering.FlascFilter</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.data_processing.find_sensor_faults.html">flasc.data_processing.find_sensor_faults</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.find_sensor_faults.find_sensor_stuck_faults.html">flasc.data_processing.find_sensor_faults.find_sensor_stuck_faults</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.data_processing.northing_offset.html">flasc.data_processing.northing_offset</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.northing_offset.crosscheck_northing_offset_consistency.html">flasc.data_processing.northing_offset.crosscheck_northing_offset_consistency</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.data_processing.time_operations.html">flasc.data_processing.time_operations</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.time_operations.df_downsample.html">flasc.data_processing.time_operations.df_downsample</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.time_operations.df_movingaverage.html">flasc.data_processing.time_operations.df_movingaverage</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.time_operations.df_resample_by_interpolation.html">flasc.data_processing.time_operations.df_resample_by_interpolation</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.data_processing.time_operations.flatten_cols.html">flasc.data_processing.time_operations.flatten_cols</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.html">flasc.utilities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.circular_statistics.html">flasc.utilities.circular_statistics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.circular_statistics.calc_wd_mean_radial.html">flasc.utilities.circular_statistics.calc_wd_mean_radial</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.circular_statistics.calculate_wd_statistics.html">flasc.utilities.circular_statistics.calculate_wd_statistics</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.html">flasc.utilities.energy_ratio_utilities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.add_bin_weights.html">flasc.utilities.energy_ratio_utilities.add_bin_weights</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.add_power_ref.html">flasc.utilities.energy_ratio_utilities.add_power_ref</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.add_power_test.html">flasc.utilities.energy_ratio_utilities.add_power_test</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.add_reflected_rows.html">flasc.utilities.energy_ratio_utilities.add_reflected_rows</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.add_wd.html">flasc.utilities.energy_ratio_utilities.add_wd</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.add_wd_bin.html">flasc.utilities.energy_ratio_utilities.add_wd_bin</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.add_ws.html">flasc.utilities.energy_ratio_utilities.add_ws</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.add_ws_bin.html">flasc.utilities.energy_ratio_utilities.add_ws_bin</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.bin_and_group_dataframe.html">flasc.utilities.energy_ratio_utilities.bin_and_group_dataframe</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.bin_column.html">flasc.utilities.energy_ratio_utilities.bin_column</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.check_compute_energy_ratio_inputs.html">flasc.utilities.energy_ratio_utilities.check_compute_energy_ratio_inputs</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.cut.html">flasc.utilities.energy_ratio_utilities.cut</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.filter_all_nulls.html">flasc.utilities.energy_ratio_utilities.filter_all_nulls</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.energy_ratio_utilities.filter_any_nulls.html">flasc.utilities.energy_ratio_utilities.filter_any_nulls</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.html">flasc.utilities.floris_tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.add_gaussian_blending_to_floris_approx_table.html">flasc.utilities.floris_tools.add_gaussian_blending_to_floris_approx_table</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.calc_floris_approx_table.html">flasc.utilities.floris_tools.calc_floris_approx_table</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.get_all_dependent_turbines.html">flasc.utilities.floris_tools.get_all_dependent_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.get_all_impacting_turbines.html">flasc.utilities.floris_tools.get_all_impacting_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.get_all_impacting_turbines_geometrical.html">flasc.utilities.floris_tools.get_all_impacting_turbines_geometrical</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.get_dependent_turbines_by_wd.html">flasc.utilities.floris_tools.get_dependent_turbines_by_wd</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.get_turbs_in_radius.html">flasc.utilities.floris_tools.get_turbs_in_radius</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.get_upstream_turbs_floris.html">flasc.utilities.floris_tools.get_upstream_turbs_floris</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.floris_tools.interpolate_floris_from_df_approx.html">flasc.utilities.floris_tools.interpolate_floris_from_df_approx</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.lookup_table_tools.html">flasc.utilities.lookup_table_tools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.lookup_table_tools.get_yaw_angles_interpolant.html">flasc.utilities.lookup_table_tools.get_yaw_angles_interpolant</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.optimization.html">flasc.utilities.optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.optimization.estimate_ti.html">flasc.utilities.optimization.estimate_ti</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.optimization.find_timeshift_between_dfs.html">flasc.utilities.optimization.find_timeshift_between_dfs</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.optimization.match_y_curves_by_offset.html">flasc.utilities.optimization.match_y_curves_by_offset</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.tuner_utilities.html">flasc.utilities.tuner_utilities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.tuner_utilities.nested_get.html">flasc.utilities.tuner_utilities.nested_get</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.tuner_utilities.nested_set.html">flasc.utilities.tuner_utilities.nested_set</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.tuner_utilities.replicate_nan_values.html">flasc.utilities.tuner_utilities.replicate_nan_values</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.tuner_utilities.resim_floris.html">flasc.utilities.tuner_utilities.resim_floris</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.utilities.html">flasc.utilities.utilities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.utilities.estimate_dt.html">flasc.utilities.utilities.estimate_dt</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.utilities.get_num_turbines.html">flasc.utilities.utilities.get_num_turbines</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.utilities.interp_with_max_gap.html">flasc.utilities.utilities.interp_with_max_gap</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="_autosummary/flasc.utilities.utilities_examples.html">flasc.utilities.utilities_examples</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.utilities_examples.load_floris_artificial.html">flasc.utilities.utilities_examples.load_floris_artificial</a></li>
<li class="toctree-l4"><a class="reference internal" href="_autosummary/flasc.utilities.utilities_examples.load_floris_smarteole.html">flasc.utilities.utilities_examples.load_floris_smarteole</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NREL/flasc" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/flasc/edit/main/docs/data_processing.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NREL/flasc/issues/new?title=Issue%20on%20page%20%2Fdata_processing.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/data_processing.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Raw data processing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-data-retrieval">Raw data retrieval</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#format-data-to-a-wide-table-format-if-necessary">Format data to a wide table format (if necessary)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-filtering">Data filtering</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-00-initial-download-py">a_00_initial_download.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-01-to-common-format-df-py">a_01_to_common_format_df.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-02-basic-filters-py">a_02_basic_filters.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-03-check-sensor-stuck-faults-py">a_03_check_sensor_stuck_faults.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-04-wspowercurve-filtering-code-py">a_04_wspowercurve_filtering_code.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-04-wspowercurve-filtering-gui-py-optional">a_04_wspowercurve_filtering_gui.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-05a-plot-faults-with-layout-py-optional">a_05a_plot_faults_with_layout.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-05b-cross-compare-wd-measurement-calibrations-py-optional">a_05b_cross_compare_wd_measurement_calibrations.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-06a-determine-timeshift-datasources-py-optional">a_06a_determine_timeshift_datasources.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-06b-apply-timeshift-dfs-py-optional">a_06b_apply_timeshift_dfs.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-07a-estimate-wd-bias-per-turbine-py">a_07a_estimate_wd_bias_per_turbine.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-07b-wd-bias-to-df-py">a_07b_wd_bias_to_df.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-08-plot-energy-ratios-py">a_08_plot_energy_ratios.py</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="raw-data-processing">
<h1>Raw data processing<a class="headerlink" href="#raw-data-processing" title="Link to this heading">#</a></h1>
<p>A common data preparation procedure using FLASC is as follows:</p>
<section id="raw-data-retrieval">
<h2>Raw data retrieval<a class="headerlink" href="#raw-data-retrieval" title="Link to this heading">#</a></h2>
<p>The raw SCADA data is retrieved from an external location (e.g., FTP
server or SQL database). This step is not part of the FLASC toolbox because
it is very specific to the data location and format. It is up to the user to
download the data and format it in a Python-accessible manner (e.g., in a
.csv file).</p>
</section>
<section id="format-data-to-a-wide-table-format-if-necessary">
<h2>Format data to a wide table format (if necessary)<a class="headerlink" href="#format-data-to-a-wide-table-format-if-necessary" title="Link to this heading">#</a></h2>
<p>SCADA data can be made available in various forms. The data may already be
sampled on a common time vector, with e.g., measurements of all turbines every
10 minutes. In other situations, it may be that data is logged in a &quot;long&quot;
format, and where measurements are only reported if the signal has actually
changed. An example of such a data format is:</p>
<div class="pst-scrollable-table-container"><table class="table" id="id1">
<caption><span class="caption-text">Example <code class="xref rst rst-dir docutils literal notranslate"><span class="pre">Tall</span> <span class="pre">data</span> <span class="pre">format</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">three</span> <span class="pre">turbine</span> <span class="pre">wind</span> <span class="pre">farm</span></code></span><a class="headerlink" href="#id1" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Time</p></th>
<th class="head"><p>Turbine</p></th>
<th class="head"><p>Variable</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2020-01-01 12:15:01</p></td>
<td><p>A1</p></td>
<td><p>NacWindSpeed</p></td>
<td><p>5.5</p></td>
</tr>
<tr class="row-odd"><td><p>2020-01-01 12:15:01</p></td>
<td><p>A2</p></td>
<td><p>NacWindSpeed</p></td>
<td><p>4.5</p></td>
</tr>
<tr class="row-even"><td><p>2020-01-01 12:15:02</p></td>
<td><p>A3</p></td>
<td><p>NacWindSpeed</p></td>
<td><p>7.9</p></td>
</tr>
<tr class="row-odd"><td><p>2020-01-01 12:15:05</p></td>
<td><p>A2</p></td>
<td><p>NacWindSpeed</p></td>
<td><p>4.1</p></td>
</tr>
<tr class="row-even"><td><p>2020-01-01 12:15:07</p></td>
<td><p>A1</p></td>
<td><p>NacWindSpeed</p></td>
<td><p>5.9</p></td>
</tr>
<tr class="row-odd"><td><p>2020-01-01 12:15:11</p></td>
<td><p>A3</p></td>
<td><p>NacWindSpeed</p></td>
<td><p>7.2</p></td>
</tr>
</tbody>
</table>
</div>
<p>The &quot;long&quot; data format is comon with high-resolution data (e.g., 1Hz), to
reduce data storage needs on the logging side. The FLASC analysis tools
require data to be in a wide table format. This means that it is up to
the user to resample the data for every wind turbine onto a common time
vector and format the data into a &quot;wide&quot; table format. The wide table format
looks as follows:</p>
<div class="pst-scrollable-table-container"><table class="table" id="id2">
<caption><span class="caption-text">Example <code class="xref rst rst-dir docutils literal notranslate"><span class="pre">Wide</span> <span class="pre">data</span> <span class="pre">format</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">three</span> <span class="pre">turbine</span> <span class="pre">wind</span> <span class="pre">farm</span></code></span><a class="headerlink" href="#id2" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Time</p></th>
<th class="head"><p>NacWindSpeed_A1</p></th>
<th class="head"><p>NacWindSpeed_A2</p></th>
<th class="head"><p>NacWindSpeed_A3</p></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>2020-01-01 12:15:01</p></td>
<td><p>5.5</p></td>
<td><p>4.5</p></td>
<td><p>7.3</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>2020-01-01 12:15:02</p></td>
<td><p>5.5</p></td>
<td><p>4.5</p></td>
<td><p>7.9</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2020-01-01 12:15:03</p></td>
<td><p>5.5</p></td>
<td><p>4.5</p></td>
<td><p>7.9</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>2020-01-01 12:15:04</p></td>
<td><p>5.5</p></td>
<td><p>4.5</p></td>
<td><p>7.9</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2020-01-01 12:15:05</p></td>
<td><p>5.5</p></td>
<td><p>4.1</p></td>
<td><p>5.9</p></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>There is currently no example provided with FLASC that demonstrates the
process of data resampling and converting a long-formatted dataset to
a wide-formatted dataset. However, FLASC does provide tools to simplify
this table formatting, heavily relying on the internal functions in
the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/index.html">Python Pandas library</a> for computational
efficiency.</p>
<p>Firstly, <code class="docutils literal notranslate"><span class="pre">df_resample_by_interpolation()</span></code> function allows the user to resample
a dataset which is sampled on an nonhomogeneous time vector to a time vector
with a consistent time step. This is useful, since long-formatted data is
often inconsequently sampled. One can also specify a maximum time gap for
data interpolation. If no data is available for a time period longer than
max_gap, the data will be assigned a <code class="docutils literal notranslate"><span class="pre">NaN</span></code> value.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flasc.time_operations</span> <span class="kn">import</span> <span class="n">df_resample_by_interpolation</span>
<span class="n">df_res</span> <span class="o">=</span> <span class="n">df_resample_by_interpolation</span><span class="p">(</span>
     <span class="n">df</span><span class="p">,</span>
     <span class="n">time_array</span><span class="p">,</span>
     <span class="n">circular_cols</span><span class="p">,</span>
     <span class="n">interp_method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span>
     <span class="n">max_gap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
     <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>This function also deals with 360-degree wrapping for nacelle headings and
wind direction measurements, as specified by the <code class="docutils literal notranslate"><span class="pre">circular_cols</span></code> option.</p>
<p>After each turbine's measurements are sampled onto a common time vector, they
can straightforwardly be appended into a single, wide-formatted table
(which in Python is a <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code>). A common way to format a long table
into a wide table, assuming they all share the same <code class="docutils literal notranslate"><span class="pre">date</span></code> vector, is:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="s2">&quot;turbine&quot;</span><span class="p">,</span> <span class="s2">&quot;variable&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>

<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">{:s}</span><span class="s2">_</span><span class="si">{:s}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>or a variant of these commands.</p>
</section>
<section id="data-filtering">
<h2>Data filtering<a class="headerlink" href="#data-filtering" title="Link to this heading">#</a></h2>
<p>With the SCADA data now in a wide-formatted Pandas DataFrame, the flasc
data filtering tools can readily be applied. The files in
<code class="docutils literal notranslate"><span class="pre">examples_artifical_data/raw_data_processing</span></code> demonstrate how the SCADA data files are
processed.</p>
<section id="a-00-initial-download-py">
<h3>a_00_initial_download.py<a class="headerlink" href="#a-00-initial-download-py" title="Link to this heading">#</a></h3>
<p>The first script, <code class="docutils literal notranslate"><span class="pre">a_00_initial_download.py</span></code>, simply demonstrates how the raw data is imported. This
basically compromises of the previous two steps, being data downloading and
formatting it into a wide table format. Data is typically saved within flasc
using the
<a class="reference external" href="https://arrow.apache.org/docs/python/feather.html">feather format</a>, which
is known for its excellent IO speed and its efficient storage, being often a
factor 10 smaller than a similar .csv file.</p>
</section>
<section id="a-01-to-common-format-df-py">
<h3>a_01_to_common_format_df.py<a class="headerlink" href="#a-01-to-common-format-df-py" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_01_to_common_format_df.py</span></code> renames the columns in the Pandas DataFrame to the conventional
variable namings that we use within flasc. We use the following naming
convention:</p>
<ul class="simple">
<li><p>The common time vector is denoted by <code class="docutils literal notranslate"><span class="pre">time</span></code>.</p></li>
<li><p>The turbine wind speed in [m/s] is denoted by <code class="docutils literal notranslate"><span class="pre">ws</span></code>.</p></li>
<li><p>The turbine power production in [W] is denoted by <code class="docutils literal notranslate"><span class="pre">pow</span></code>.</p></li>
<li><p>The wind direction measured by each turbine, between 0 and 360 deg, is denoted by <code class="docutils literal notranslate"><span class="pre">wd</span></code>.</p></li>
<li><p>The turbine nacelle heading, between 0 and 360 deg, is denoted by <code class="docutils literal notranslate"><span class="pre">yaw</span></code>.</p></li>
<li><p>The turbine vane angle, between -180 and +180 deg, is denoted by <code class="docutils literal notranslate"><span class="pre">vane</span></code>.</p></li>
</ul>
<p>Each variable (besides <code class="docutils literal notranslate"><span class="pre">time</span></code>) is appended with a three-digit identifier for
the turbine. For example, <code class="docutils literal notranslate"><span class="pre">ws_000</span></code> refers to the measured wind speed of the
first turbine in the wind farm. Out of these five variables, <code class="docutils literal notranslate"><span class="pre">ws</span></code> and
<code class="docutils literal notranslate"><span class="pre">pow</span></code> are always required, and either <code class="docutils literal notranslate"><span class="pre">wd</span></code> or <code class="docutils literal notranslate"><span class="pre">yaw</span></code> is necessary for
most of the energy ratio analyses.</p>
</section>
<section id="a-02-basic-filters-py">
<h3>a_02_basic_filters.py<a class="headerlink" href="#a-02-basic-filters-py" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_02_basic_filters.py</span></code> identifies obvious data outliers. The criteria for this are
assigned by <code class="docutils literal notranslate"><span class="pre">conds</span></code>. The example file assigns the following conditions as
being obviously faulty:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">conds</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">~</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;is_operation_normal_</span><span class="si">{:03d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ti</span><span class="p">)],</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;ws_</span><span class="si">{:03d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ti</span><span class="p">)]</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;pow_</span><span class="si">{:03d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ti</span><span class="p">)]</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</div></blockquote>
<p>where the column <code class="docutils literal notranslate"><span class="pre">is_operation_normal_000</span></code> would refer to a turbine's
self-reported signal that identifies its operational state as normal or not.
Further, negative wind speed and power measurements are identified as faulty.
The script will also plot the timestamps for which the faulty conditions
are met. For example, the figure below shows two weeks in which the turbine
flagged a lot of its own operation as faulty, being the 22nd and 23rd week
of 2019:</p>
<a class="reference internal image-reference" href="images/example_02_basic_filtering.png"><img alt="alternate text" class="align-center" src="images/example_02_basic_filtering.png" /></a>
</section>
<section id="a-03-check-sensor-stuck-faults-py">
<h3>a_03_check_sensor_stuck_faults.py<a class="headerlink" href="#a-03-check-sensor-stuck-faults-py" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_03_check_sensor_stuck_faults.py</span></code> detects sensor-stuck type of faults. These are faults in which
the sensor reports the exact same value for an unrealistically long period
of time. For example, if the reported vane angle is exactly 14.33 deg for
5 consecutive minutes, it is obvious that this measurement cannot be trusted.
Though that not all measurements are valid for a sensor-stuck-type-of-fault
check. Namely, the nacelle heading is a more discrete signal and often
points in the same direction for longer periods of time. Therefore, the
signals to check this fault for must be carefully selected. Good signals
for this are <code class="docutils literal notranslate"><span class="pre">ws</span></code> and <code class="docutils literal notranslate"><span class="pre">vane</span></code>. The signals are selected in the
<code class="docutils literal notranslate"><span class="pre">column_list</span></code> variable.</p>
</section>
<section id="a-04-wspowercurve-filtering-code-py">
<h3>a_04_wspowercurve_filtering_code.py<a class="headerlink" href="#a-04-wspowercurve-filtering-code-py" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_04_wspowercurve_filtering_code.py</span></code> is a fairly exhaustive
filtering class that can identify the nominal turbine wind-speed power curve
and remove outliers. Outliers can be simply faulty sensor measurements, but
can also be periods of curtailment and periods of turbine maintenance.</p>
<a class="reference internal image-reference" href="images/example_04_wspowcurve_filtering.png"><img alt="alternate text" class="align-center" src="images/example_04_wspowcurve_filtering.png" /></a>
<p>There are two main ways of detecting and removing outliers. The first method
is by adding &quot;windows&quot; in which measurements must be located. This can be
done by:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">FlascFilter</span><span class="o">.</span><span class="n">window_add</span><span class="p">(</span>
    <span class="n">ws_range</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.2</span><span class="p">],</span>
    <span class="n">pow_range</span><span class="o">=</span><span class="p">[</span><span class="mf">3100.0</span><span class="p">,</span> <span class="mf">3200.0</span><span class="p">],</span>
    <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">turbines</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Within the <code class="docutils literal notranslate"><span class="pre">window_add</span></code> function, one specifies the wind speed and power
production range in which measurements are valid. Any measurements outside
of this range is faulty. The <code class="docutils literal notranslate"><span class="pre">axis</span></code> option defines in which direction the
window outliers are enforced. For example, with <code class="docutils literal notranslate"><span class="pre">axis=0</span></code>, any measurements
within the power production range but outside of the wind speed range are
classified as faulty. Similarly, with <code class="docutils literal notranslate"><span class="pre">axis=1</span></code>, any measurements within the
wind speed range but outside the power production range are classified as
faulty and removed.</p>
<p>The second method for data filtering is by looking at the deviation of
measurements in comparison to the nominal power curve. This filtering method
is enforced by the <code class="docutils literal notranslate"><span class="pre">FlascFilter.filter_by_power_curve()</span></code> function.
In the figure above, the allowable deviations from the median power curve
are denoted in the brown and pink dashed line.</p>
</section>
<section id="a-04-wspowercurve-filtering-gui-py-optional">
<h3>a_04_wspowercurve_filtering_gui.py (optional)<a class="headerlink" href="#a-04-wspowercurve-filtering-gui-py-optional" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_04_wspowercurve_filtering_gui.py</span></code> is a GUI front for the
windspeed-power curve filtering class, and is for comparable usage as the
<code class="docutils literal notranslate"><span class="pre">a_04_wspowercurve_filtering_code.py</span></code> script. Both functions serve the
same function and thus typically this script (<code class="docutils literal notranslate"><span class="pre">_gui.py</span></code>) can be ignored
in the filtering process. Generally, we strongly recommend users to use
<code class="docutils literal notranslate"><span class="pre">a_04_wspowercurve_filtering_code.py</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">a_04_wspowercurve_filtering_gui.py</span></code> for any real data processing.</p>
<p>This script should be run by:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>streamlit<span class="w"> </span>run<span class="w"> </span>a_04_wspowercurve_filtering_gui.py
</pre></div>
</div>
</div></blockquote>
<a class="reference internal image-reference" href="images/example_04_wspowcurve_filtering_streamlit.png"><img alt="alternate text" class="align-center" src="images/example_04_wspowcurve_filtering_streamlit.png" /></a>
<p>Using this GUI, the user can analyze specific turbines, interactively add or
remove filter windows, and adjust settings to the filtering method based on
deviations from the median power curve. The user can also analyze specific
time periods of the data to speed up computations and plotting. Finally, it
is important to note that the user should set the <code class="docutils literal notranslate"><span class="pre">Turbines</span> <span class="pre">to</span> <span class="pre">analyze</span></code> to
<code class="docutils literal notranslate"><span class="pre">all</span></code>, in case the filtered dataframe is to be exported and saved locally.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>For most applications, we recommend you to use the
<code class="docutils literal notranslate"><span class="pre">a_04_wspowercurve_filtering_code.py</span></code> as it has gone through more tests and
usage. The streamlit app is useful for exploring the options within the
windspeed-power curve filtering class, but its not recommend for widespread
usage.</p>
</div>
</section>
<section id="a-05a-plot-faults-with-layout-py-optional">
<h3>a_05a_plot_faults_with_layout.py (optional)<a class="headerlink" href="#a-05a-plot-faults-with-layout-py-optional" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_05a_plot_faults_with_layout.py</span></code> is not functional, but
primarily informative. It plots the turbine locations and colors them based on
their ratio of valid vs. invalid measurements. This allows the user to
identify any turbines that have a significantly higher percentage of faulty
measurements than others. This could point towards operational issues or
prolonged maintenance periods.</p>
</section>
<section id="a-05b-cross-compare-wd-measurement-calibrations-py-optional">
<h3>a_05b_cross_compare_wd_measurement_calibrations.py (optional)<a class="headerlink" href="#a-05b-cross-compare-wd-measurement-calibrations-py-optional" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_05b_cross_compare_wd_measurement_calibrations.py</span></code> cuts the
data up into different time periods, in the order of weeks to months, and then
cross-compares the wind direction measurements. The average difference in deg
between the wind directions (or nacelle headings) are estimated. This is often
nonzero since turbines are often not calibrated to true north. However, their
relative offset should be constant over time, if their calibrations are not
reset or changed during the measurement period. For each data slice, the
offsets between turbines' wind direction signals are calculated. If the
offsets do not change over time, their northing calibrations are consistent
and their wind direction measurements are useable for further analysis.
If the offset between turbines' wind directions change over time, the northing
calibrations for one or both turbines are inconsistent and therefore their
measurements cannot be trusted.</p>
<p>This script produces a figure that shows the turbine layouts and colors
the turbines according to their northing calibration validity: either being
valid (green), uncertain (orange), or confirmed invalid (red).</p>
</section>
<section id="a-06a-determine-timeshift-datasources-py-optional">
<h3>a_06a_determine_timeshift_datasources.py (optional)<a class="headerlink" href="#a-06a-determine-timeshift-datasources-py-optional" title="Link to this heading">#</a></h3>
<p>If we have measurements available from multiple sources, such as both SCADA
data from turbines and from an operational met mast, we first need to make
sure these datasets are time synchronized. We can do that with the script
<code class="docutils literal notranslate"><span class="pre">a_06a_determine_timeshift_datasources.py</span></code>. Based on a commonly measured
variable such as the wind direction, this script finds the optimal timeshift
such that the two signals show maximum agreement (using the Pearson
correlation coefficient). Often, time shifts between dataframes are a round
number of hours, being due to different measurement equipment using different
timezones for their internal clock.</p>
<p>In our example, turbine 3 is positioned close to the met mast. Therefore,
we estimate the timeshift between the datasets using one signal of
turbine 3 and a comparable signal of the met mast. Here, that signal is the
wind direction, which should be comparable between the two turbines.
Note that we have not yet calibrated the turbine's wind direction to
true north, so we may have an offset anywhere between -180 and +180 deg
compared to the met mast signal. The algorithm in
<code class="docutils literal notranslate"><span class="pre">a_06a_determine_timeshift_datasources.py</span></code> accommodates for that by
calculating and subtracting the mean difference in wind directions over
the entire time period. The assign the measurement(s) to compare in
<code class="docutils literal notranslate"><span class="pre">scada_cols</span></code> for the turbine-measured values, and <code class="docutils literal notranslate"><span class="pre">metmast_cols</span></code>
for the external measurements, respectively. If these variables are
angles that wrap around 360 degrees, then we must set
<code class="docutils literal notranslate"><span class="pre">circular_stats=True</span></code>.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">scada_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;wd_003&quot;</span><span class="p">]</span>
<span class="n">metmast_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;WindDirection_80m&quot;</span><span class="p">]</span>
<span class="n">circular_stats</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="a-06b-apply-timeshift-dfs-py-optional">
<h3>a_06b_apply_timeshift_dfs.py (optional)<a class="headerlink" href="#a-06b-apply-timeshift-dfs-py-optional" title="Link to this heading">#</a></h3>
<p>The optimal time shift found in <code class="docutils literal notranslate"><span class="pre">a_06a_determine_timeshift_datasources.py</span></code>
is used in this script to shift the time vector of one of the two dataframes
so that they are synchronized with the other dataframe.</p>
</section>
<section id="a-07a-estimate-wd-bias-per-turbine-py">
<h3>a_07a_estimate_wd_bias_per_turbine.py<a class="headerlink" href="#a-07a-estimate-wd-bias-per-turbine-py" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_07a_estimate_wd_bias_per_turbine.py</span></code> is used for northing
calibration of every turbine's wind direction measurement to true north.
What we do here is that we compare the energy ratios over the entire
wind rose against the energy ratios predicted by the floris wake model.
We evaluate the difference between the measured and modeled energy ratio curves
for different biases, between -180 deg and +180 deg, and then find the
offset required on the SCADA-based wind directionm signal that best aligns
the energy ratios. This is comparable to aligning the angles at which the
largest wake deficit occurs, which is the common method in the literature,
yet more inclusive since it considers all wake interactions over the wind
rose for the northing calibration. Here are the energy ratio curves
prior to northing calibration:</p>
<a class="reference internal image-reference" href="images/example_07a_northing_calibration_pre.png"><img alt="alternate text" class="align-center" src="images/example_07a_northing_calibration_pre.png" /></a>
<p>After evaluating a large range of possible bias corrections on the wind
direction signal of a turbine, we find the value which best aligns the
energy ratios. The energy ratios with the calibrated wind direction
signal are shown in the next figure:</p>
<a class="reference internal image-reference" href="images/example_07a_northing_calibration_post.png"><img alt="alternate text" class="align-center" src="images/example_07a_northing_calibration_post.png" /></a>
<p>Note that this method can be used for each turbine individually. However,
a simpler and faster method exists: once the first turbine's wind
direction has been calibrated to true north, it is fairly easy to calibrate
the other turbine's signals to this first turbine. Namely, we can estimate
the average difference between the wind direction signals of the calibrated
turbine and any other (uncalibrated) turbine, and that becomes the bias
correction that the turbine needs. We can determine the shift between
two turbine's wind direction signals using the <code class="docutils literal notranslate"><span class="pre">match_y_curves_by_offset</span></code>
function, as demonstrated in the example script
<code class="docutils literal notranslate"><span class="pre">a_07a_estimate_wd_bias_per_turbine.py</span></code>.</p>
<p>For more information how the subtleties about calculating the energy ratio,
and the various lower-level choices that must be made to do so, please see
the example and documentation surrounding the energy ratio analysis suite.</p>
</section>
<section id="a-07b-wd-bias-to-df-py">
<h3>a_07b_wd_bias_to_df.py<a class="headerlink" href="#a-07b-wd-bias-to-df-py" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_07b_wd_bias_to_df.py</span></code> takes the wind direction bias correction
terms estimated in <code class="docutils literal notranslate"><span class="pre">a_07a_estimate_wd_bias_per_turbine.py</span></code> and applies them
on the SCADA dataset. Each of the <code class="docutils literal notranslate"><span class="pre">wd_000</span></code>, <code class="docutils literal notranslate"><span class="pre">wd_001</span></code>, <code class="docutils literal notranslate"><span class="pre">wd_...</span></code> columns
in the dataframes are now northing calibrated. Note that the example script
only applies the northing corrections to the wind direction signals. If the
dataset also contains turbine nacelle headings (i.e., <code class="docutils literal notranslate"><span class="pre">yaw_000</span></code>,
<code class="docutils literal notranslate"><span class="pre">yaw_001</span></code>, <code class="docutils literal notranslate"><span class="pre">yaw_...</span></code>), then the same correction terms must be applied
to these columns.</p>
</section>
<section id="a-08-plot-energy-ratios-py">
<h3>a_08_plot_energy_ratios.py<a class="headerlink" href="#a-08-plot-energy-ratios-py" title="Link to this heading">#</a></h3>
<p>The script <code class="docutils literal notranslate"><span class="pre">a_08_plot_energy_ratios.py</span></code> plots the energy ratios after
calibration. It produces the most recent figure shown above, and repeated
below for completeness. For more
information how the subtleties about calculating the energy ratio,
and the various lower-level choices that must be made to do so, please see
the example and documentation surrounding the energy ratio analysis suite.</p>
<a class="reference internal image-reference" href="images/example_07a_northing_calibration_post.png"><img alt="alternate text" class="align-center" src="images/example_07a_northing_calibration_post.png" /></a>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="index.html">Return to table of contents</a></p>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-data-retrieval">Raw data retrieval</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#format-data-to-a-wide-table-format-if-necessary">Format data to a wide table format (if necessary)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-filtering">Data filtering</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-00-initial-download-py">a_00_initial_download.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-01-to-common-format-df-py">a_01_to_common_format_df.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-02-basic-filters-py">a_02_basic_filters.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-03-check-sensor-stuck-faults-py">a_03_check_sensor_stuck_faults.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-04-wspowercurve-filtering-code-py">a_04_wspowercurve_filtering_code.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-04-wspowercurve-filtering-gui-py-optional">a_04_wspowercurve_filtering_gui.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-05a-plot-faults-with-layout-py-optional">a_05a_plot_faults_with_layout.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-05b-cross-compare-wd-measurement-calibrations-py-optional">a_05b_cross_compare_wd_measurement_calibrations.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-06a-determine-timeshift-datasources-py-optional">a_06a_determine_timeshift_datasources.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-06b-apply-timeshift-dfs-py-optional">a_06b_apply_timeshift_dfs.py (optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-07a-estimate-wd-bias-per-turbine-py">a_07a_estimate_wd_bias_per_turbine.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-07b-wd-bias-to-df-py">a_07b_wd_bias_to_df.py</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-08-plot-energy-ratios-py">a_08_plot_energy_ratios.py</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By National Renewable Energy Laboratory
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>