
<!DOCTYPE html>

<html lang="python">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Data analysis &#8212; FLASC</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Licensing" href="licensing.html" />
    <link rel="prev" title="Raw data processing" href="data_processing.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="python">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-3PMGTE1H70"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-3PMGTE1H70');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">FLASC</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    FLASC documentation
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="getting_started.html">
   Getting started
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  User Referece
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data_processing.html">
   Raw data processing
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Data analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="licensing.html">
   Licensing
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/NREL/flasc"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/NREL/flasc/issues/new?title=Issue%20on%20page%20%2Fdata_analysis.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/NREL/flasc/edit/main/docs/data_analysis.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/data_analysis.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#energy-ratio-analysis">
   Energy ratio analysis
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#energy-ratio-curve-for-a-single-dataframe">
     Energy ratio curve for a single dataframe
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#energy-ratio-curves-for-multiple-dataframes">
     Energy ratio curves for multiple dataframes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comprehensive-table-based-analysis">
     Comprehensive table-based analysis
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Data analysis</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#energy-ratio-analysis">
   Energy ratio analysis
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#energy-ratio-curve-for-a-single-dataframe">
     Energy ratio curve for a single dataframe
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#energy-ratio-curves-for-multiple-dataframes">
     Energy ratio curves for multiple dataframes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comprehensive-table-based-analysis">
     Comprehensive table-based analysis
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="data-analysis">
<h1>Data analysis<a class="headerlink" href="#data-analysis" title="Permalink to this headline">#</a></h1>
<p>Once the SCADA data has been filtered, outliers have been removed and the
turbine signals have been calibrated to true north, they can be
straightforwardly used in the analysis methods implemented in FLASC.
Several of such methods are described next.</p>
<section id="energy-ratio-analysis">
<h2>Energy ratio analysis<a class="headerlink" href="#energy-ratio-analysis" title="Permalink to this headline">#</a></h2>
<p>The energy ratio metric is defined as the energy yield of a test turbine
relative to the energy yield of one or multiple reference turbines for
a particular wind rose, e.g., for annual operation. See
<span id="id1">[<a class="reference internal" href="overview.html#id4" title="B M Doekemeijer, E Simley, and P A Fleming. Comparison of the gaussian wind farm model with historical data of three offshore wind farms. Energies, 2022. In review.">1</a>]</span> and <span id="id2">[<a class="reference internal" href="overview.html#id5" title="C J Bay, P A Fleming, B M Doekemeijer, J King, M Churchfield, and R Mudafort. Addressing deep array effects and impacts to wake steering with the cumulative-curl wake model. Wind Energy Science Discussions, 2022:1â€“28, 2022. In preparation.">2</a>]</span> for a practical
example of how the energy ratios can be used in the analyses of
historical SCADA data of three offshore wind farms and their comparison
to an engineering wind farm model.</p>
<p>This repository contains two example functions concerning the calculation of
the energy ratios of various turbines in a wind farm. The first example
is <code class="docutils literal notranslate"><span class="pre">energy_ratio_for_single_df.py</span></code>. This is described
in several steps.</p>
<section id="energy-ratio-curve-for-a-single-dataframe">
<h3>Energy ratio curve for a single dataframe<a class="headerlink" href="#energy-ratio-curve-for-a-single-dataframe" title="Permalink to this headline">#</a></h3>
<p>Calculating the energy ratios for a dataset is mostly streamlined by the FLASC
repository. Several lower-level decisions must be made that can have smaller
to larger impacts on the energy ratio values. The example file
<code class="docutils literal notranslate"><span class="pre">energy_ratio_for_single_df.py</span></code> is broken down and explained here.</p>
<p>Firstly, one must define a reference wind direction. This wind direction
must be northing-calibrated and the measurement should be valid
(i.e., should not have jumps in its northing calibration throughout the data).
The reference wind direction may be the wind direction of the test turbine, or
the average wind direction of multiple turbines neighboring the test turbine,
or even be the average wind direction in the farm (typically valid for small
farms). For larger wind farms, the reference wind direction often comes from
one or multiple turbines neighboring the test turbine, to minimize any
undesired correlations between the reference wind direction and the power
production of the test turbine. In this simple example case, we assign the
reference wind direction as being the average wind direction of all turbines
in the farm.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">dfm</span><span class="o">.</span><span class="n">set_wd_by_all_turbines</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>If desired, we can cut down the data to a specific range of wind directions.
In the example script, we limit our range of interest to wind directions
between 20 and 90 degrees.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">dfm</span><span class="o">.</span><span class="n">filter_df_by_wd</span><span class="p">(</span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">wd_range</span><span class="o">=</span><span class="p">[</span><span class="mf">20.</span><span class="p">,</span> <span class="mf">90.</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>While the reference wind direction has been selected, the reference wind speed
has not yet been selected. We can select the reference wind speed as the average
wind speed from all upstream turbines within a 5 kilometer radius of the test
turbine, for example. However, for a small wind farm like in this example,
we can simply assign the reference wind speed as the mean wind speed of all
upstream turbines using <code class="docutils literal notranslate"><span class="pre">set_ws_by_upstream_turbines()</span></code>. Therefore, we must
first calculate which turbines are upstream and for which wind directions,
which we do using the function <code class="docutils literal notranslate"><span class="pre">get_upstream_turbs_floris()</span></code>. Then, we
extract the right measurements and average them accordingly. Similarly, we
must define a reference power production, by which the test turbine's power
production will be divided. Knowing which test turbine we are considering,
and knowing which turbines we want to normalize to, we can assign the
reference power production by <code class="docutils literal notranslate"><span class="pre">set_pow_ref_by_turbines()</span></code>. Common
alternatives for the reference power are <code class="docutils literal notranslate"><span class="pre">set_pow_ref_by_upstream_turbines()</span></code>
and <code class="docutils literal notranslate"><span class="pre">set_pow_ref_by_upstream_turbines_in_radius()</span></code>, to assign the reference
power production according to all upstream turbines (within a certain radius
of the test turbine).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df_upstream</span> <span class="o">=</span> <span class="n">fsatools</span><span class="o">.</span><span class="n">get_upstream_turbs_floris</span><span class="p">(</span><span class="n">fi</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">dfm</span><span class="o">.</span><span class="n">set_ws_by_upstream_turbines</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_upstream</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">dfm</span><span class="o">.</span><span class="n">set_pow_ref_by_turbines</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">turbine_numbers</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
</pre></div>
</div>
<p>Further, we must specify how we will bin the data. Namely, we bin the data
according to the reference wind direction measurement and a reference wind
speed measurement. Furthermore, we can have a larger wind direction binning
width than the binning step size to enable overlap, as also exemplified in
<span id="id3">[<a class="reference internal" href="overview.html#id4" title="B M Doekemeijer, E Simley, and P A Fleming. Comparison of the gaussian wind farm model with historical data of three offshore wind farms. Energies, 2022. In review.">1</a>]</span>.  We can additionally specify a bootstrap sample
size, in case we want to calculate uncertainty bounds on the energy ratios.
For that, we would increase the value from <code class="docutils literal notranslate"><span class="pre">N=1</span></code> to, for example, <code class="docutils literal notranslate"><span class="pre">N=50</span></code>.
Note that increasing <code class="docutils literal notranslate"><span class="pre">N</span></code> does significantly slows down the computation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># # Initialize energy ratio object for the dataframe</span>
<span class="n">era</span> <span class="o">=</span> <span class="n">energy_ratio</span><span class="o">.</span><span class="n">energy_ratio</span><span class="p">(</span><span class="n">df_in</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Get energy ratio without uncertainty quantification</span>
<span class="n">era</span><span class="o">.</span><span class="n">get_energy_ratio</span><span class="p">(</span>
    <span class="n">test_turbines</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">wd_step</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
    <span class="n">ws_step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">wd_bin_width</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span>
    <span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">era</span><span class="o">.</span><span class="n">plot_energy_ratio</span><span class="p">()</span>
</pre></div>
</div>
<p>This should produce the following result:</p>
<a class="reference internal image-reference" href="images/example_single_df_energy_ratio.png"><img alt="alternate text" class="align-center" src="images/example_single_df_energy_ratio.png" /></a>
</section>
<section id="energy-ratio-curves-for-multiple-dataframes">
<h3>Energy ratio curves for multiple dataframes<a class="headerlink" href="#energy-ratio-curves-for-multiple-dataframes" title="Permalink to this headline">#</a></h3>
<p>In continuation of the single-dataframe energy ratio analysis, we can analyze
and cross-compare multiple energy ratios. This is exemplified in the example
<code class="docutils literal notranslate"><span class="pre">compare_energy_ratios_between_dfs.py</span></code>. It works largely in a similar manner
as the example with a single dataframe. The main difference is that now
the <code class="docutils literal notranslate"><span class="pre">energy_ratio_suite</span></code> class is used. Masking is also slightly different,
and can now be done through the <code class="docutils literal notranslate"><span class="pre">energy_ratio_suite</span></code> class directly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fsc</span> <span class="o">=</span> <span class="n">energy_ratio_suite</span><span class="o">.</span><span class="n">energy_ratio_suite</span><span class="p">()</span>
<span class="n">fsc</span><span class="o">.</span><span class="n">add_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;Original data&#39;</span><span class="p">)</span>
<span class="n">fsc</span><span class="o">.</span><span class="n">add_df</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="s1">&#39;Data with wd bias of 7.5 degrees&#39;</span><span class="p">)</span>

<span class="c1"># Now we mask the datasets to a specific wind direction subset, e.g.,</span>
<span class="c1"># to 20 deg to 90 deg.</span>
<span class="n">fsc</span><span class="o">.</span><span class="n">set_masks</span><span class="p">(</span><span class="n">wd_range</span><span class="o">=</span><span class="p">[</span><span class="mf">20.</span><span class="p">,</span> <span class="mf">90.</span><span class="p">])</span>

<span class="c1"># Calculate the energy ratios for test_turbines = [1] for the masked</span>
<span class="c1"># datasets with uncertainty quantification using 50 bootstrap samples</span>
<span class="n">fsc</span><span class="o">.</span><span class="n">get_energy_ratios</span><span class="p">(</span>
    <span class="n">test_turbines</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="n">wd_step</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
    <span class="n">ws_step</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">N</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
    <span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">5.</span><span class="p">,</span> <span class="mf">95.</span><span class="p">],</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
<span class="n">fsc</span><span class="o">.</span><span class="n">plot_energy_ratios</span><span class="p">(</span><span class="n">superimpose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">energy_ratio_suite</span></code> class also redistributes dataframes
which differ in underlying wind direction and wind speed distributions. These
dataframes are resampled onto a common wind rose, so that their energy ratios
can be compared.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">energy_ratio_suite</span></code> class is typically used to compare the dataframe
of SCADA data to the dataframes of model predictions for the same data. This
allows the user to compare, for example, FLORIS model predictions to SCADA
data. Different instantiations of the FLORIS model can be analyzed by creating
multiple dataframes and all inserting them into the suite object using the
function <code class="docutils literal notranslate"><span class="pre">add_df()</span></code>. An example of this usage is shown in
<code class="docutils literal notranslate"><span class="pre">a_08_plot_energy_ratios.py</span></code> in the <code class="docutils literal notranslate"><span class="pre">examples_artificial_data/raw_data_processing/</span></code>
folder.</p>
</section>
<section id="comprehensive-table-based-analysis">
<h3>Comprehensive table-based analysis<a class="headerlink" href="#comprehensive-table-based-analysis" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">energy_ratio_suite</span></code> described above has an additional function which
provides significant depth into the energy ratios under various scenarios.
This is the table analysis method, which generates a detailed Excel sheet
showcasing the energy ratios under various inflow conditions and in different
bins. Continuing on the example of the previous section, a user can generate
such an Excel file using the <code class="docutils literal notranslate"><span class="pre">fsc.export_detailed_energy_info_to_xlsx()</span></code>
function. Usage of this function is exemplified in
<code class="docutils literal notranslate"><span class="pre">energy_table_for_two_df.py</span></code>, in the folder <code class="docutils literal notranslate"><span class="pre">examples_artificial_data/table_analysis/</span></code>.
The function produces an Excel sheet which looks as follows:</p>
<a class="reference internal image-reference" href="images/example_table_analysis.png"><img alt="alternate text" class="align-center" src="images/example_table_analysis.png" /></a>
<p>Each set of rows displays information about a single wind direction bin.
Information displayed for each wind direction bin is, for each wind speed
bin therein, the bin counts for the two dataframes (e.g., experimental data
and model-predicted data, or experimental baseline-operation data and
experimental optimal-operation data), the mean wind speed in each bin,
the mean turbulence intensity in each bin (if available in data), the
reference power production, the test power production, and the energy
ratios. Each set of rows is also accompanied by a flow field on the left
displaying the wind farm layout and the nominal wake situation for this
wind direction bin. All of this provides useful insights into, for example,
for what wind direction and wind speed bins the model-predicted dataset
significantly deviates from the experimental data.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="index.html">Return to table of contents</a></p>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="data_processing.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Raw data processing</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="licensing.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Licensing</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By National Renewable Energy Laboratory<br/>
  
      &copy; Copyright 2023.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>